<!doctype html>
<html>
<head>
    <title></title>

    <style type="text/css">
        .vis.timeline .item.background.negative {
            background-color: rgba(255, 120, 0, 0.2) !important;
        }
        .vis.timeline .item.background.positive {
            background-color: rgba(113, 255, 34, 0.20) !important;
        }
        .vis.timeline .item.background {
            background-color: rgba(40, 148, 255, 0.20) !important;
        }
        .vis.timeline .labelset .timelineGroup .inner {
            height:100px !important;
            width:90px !important;
        }

        .vis.timeline .item.pause{
            /*top:20px !important;*/
            border-color: #a6a6a6;
            background-color: #ebebeb;
        }

        .vis.timeline .item.box.pause{
            height:16px;
            width:16px;
            box-shadow: rgba(0,0,0,0.2) 0px 0px 10px;
            padding:3px;
        }

        .vis.timeline .item.dot.pause{
            top:-5px !important;
            border-color: #7d807d;
        }

        .vis.timeline .item.range.finished{
            border-color: #7d807d !important;
            background-color: #b1ebb0 !important;
        }

        .vis.timeline .item {
            border-color: #7d807d !important;
            background-color: #f2f8ff !important;
        }

        img.icon{
            width:16px;
            height:16px;
        }
    </style>

    <script type="text/javascript" src="vis.js"></script>
    <script type="text/javascript" src="evejs.js"></script>
    <script type="text/javascript" src="./arumAgents/job.js"></script>
    <script type="text/javascript" src="./arumAgents/durationStats.js"></script>
    <script type="text/javascript" src="./arumAgents/durationData.js"></script>
    <script type="text/javascript" src="./arumAgents/jobManager.js"></script>
    <script type="text/javascript" src="./arumAgents/jobAgent.js"></script>

    <script type="text/javascript">
        'use strict';
        var timeline;
        var timelineItems = new vis.DataSet();
        var timelineGroups = new vis.DataSet();

        var graph2d;
        var graph2dDataset = new vis.DataSet();
        var graph2dGroups = new vis.DataSet();
        var eventCounter;
        function draw() {
            eventCounter = document.getElementById('eventCounter');

            // add items to the DataSet
            var timelineContainer = document.getElementById('timeline');
            var timelineOptions = {
                start: '2014-09-21', // changed so its faster
                end: '2014-09-27',
                autoResize:false,
                stack:true
            }
            timeline = new vis.Timeline(timelineContainer, timelineItems, timelineOptions, timelineGroups);

//            // add items to the DataSet
//            var graph2dContainer = document.getElementById('graph2d');
//            var graph2dOptions = {
//                start: '2014-09-24', // changed so its faster
//                end: '2014-10-01',
//                catmullRom: false,
//                graphHeight: "170px",
//                legend: true,
//                dataAxis: {width: '100px'}
//            }

//            graph2d = new vis.Graph2d(graph2dContainer, graph2dDataset, graph2dOptions, graph2dGroups);
           // renderStep();
        }

//        function renderStep() {
//            // move the window (you can think of different strategies).
//            var now = vis.moment().add(10,'seconds');
//            var Trange = timeline.getWindow();
//            var Grange = graph2d.getWindow();
//            var Tinterval = Trange.end - Trange.start;
//            var Ginterval = Grange.end - Grange.start;
//            // continuously move the window
//            timeline.setWindow(now - Tinterval, now, {animate: false});
//            graph2d.setWindow(now - Tinterval, now, {animate: false});
//            requestAnimationFrame(renderStep);
//        }


        var JAVA_EVENTS_URL = 'ws://localhost:8082/ws/events';
        var conn;

        eve.system.init({
            transports: [
                {
                    type: 'ws'
                }
            ]
        });

    </script>
    <script type="text/javascript" src="./arumAgents/genericAgent.js"></script>
    <script type="text/javascript" src="./arumAgents/agentGenerator.js"></script>
    <script type="text/javascript" src="./arumAgents/jobAgentGenerator.js"></script>
    <script type="text/javascript" src="./arumAgents/eventGenerator.js"></script>

    <script>
        var agentList = {};
        var jobList = {};
        var agentGen = new AgentGenerator("agentGenerator");
        var jobGen = new JobAgentGenerator("jobAgentGenerator");
        var eventGen = new EventGenerator("frank");

        setTimeout(function () {
            agentGen.getEvents(29);
            eventCounter.innerHTML = agentGen.eventNumber +""; // make string so it works
        }, 200);
//        eventGen.start();
        function getNewEvent() {
            agentGen.getEvents(1);
            eventCounter.innerHTML = agentGen.eventNumber +""; // make string so it works
        }

        function getAllEvents() {
            agentGen.getEvents(agentGen.amountOfEvents);
            eventCounter.innerHTML = agentGen.eventNumber +""; // make string so it works
        }
    </script>

    <link href="vis.css" rel="stylesheet" type="text/css" />

</head>
<body onload="draw()">
<input type="button" value="click me for new event!" onclick="getNewEvent()">
eventNo:<div id="eventCounter" style="display:inline;">-1</div>
<input type="button" value="get the rest of the events!" onclick="getAllEvents()">
<div id="timeline"></div>
<div id="graph2d"></div>

<p id="selection"></p>
<p id="stabilization"></p>
</body>
</html>
